/*! it - v0.1.1 - 2013-01-17
* http://doug-martin.github.com/it
* Copyright (c) 2013 [object Object]; Licensed  */
(function(){var e=function(t,n){var r=e.resolve(t,n||"/"),i=e.modules[r];if(!i)throw new Error("Failed to resolve module "+t+", tried "+r);var s=e.cache[r],o=s?s.exports:i();return o};e.paths=[],e.modules={},e.cache={},e.extensions=[".js",".coffee",".json"],e._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},e.resolve=function(){return function(t,n){function u(t){t=r.normalize(t);if(e.modules[t])return t;for(var n=0;n<e.extensions.length;n++){var i=e.extensions[n];if(e.modules[t+i])return t+i}}function a(t){t=t.replace(/\/+$/,"");var n=r.normalize(t+"/package.json");if(e.modules[n]){var i=e.modules[n](),s=i.browserify;if(typeof s=="object"&&s.main){var o=u(r.resolve(t,s.main));if(o)return o}else if(typeof s=="string"){var o=u(r.resolve(t,s));if(o)return o}else if(i.main){var o=u(r.resolve(t,i.main));if(o)return o}}return u(t+"/index")}function f(e,t){var n=l(t);for(var r=0;r<n.length;r++){var i=n[r],s=u(i+"/"+e);if(s)return s;var o=a(i+"/"+e);if(o)return o}var s=u(e);if(s)return s}function l(e){var t;e==="/"?t=[""]:t=r.normalize(e).split("/");var n=[];for(var i=t.length-1;i>=0;i--){if(t[i]==="node_modules")continue;var s=t.slice(0,i+1).join("/")+"/node_modules";n.push(s)}return n}n||(n="/");if(e._core[t])return t;var r=e.modules.path();n=r.resolve("/",n);var i=n||"/";if(t.match(/^(?:\.\.?\/|\/)/)){var s=u(r.resolve(i,t))||a(r.resolve(i,t));if(s)return s}var o=f(t,i);if(o)return o;throw new Error("Cannot find module '"+t+"'")}}(),e.alias=function(t,n){var r=e.modules.path(),i=null;try{i=e.resolve(t+"/package.json","/")}catch(s){i=e.resolve(t,"/")}var o=r.dirname(i),u=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(e.modules);for(var a=0;a<u.length;a++){var f=u[a];if(f.slice(0,o.length+1)===o+"/"){var l=f.slice(o.length);e.modules[n+l]=e.modules[o+l]}else f===o&&(e.modules[n]=e.modules[o])}},function(){var t={},n=typeof window!="undefined"?window:{},r=!1;e.define=function(i,s){!r&&e.modules.__browserify_process&&(t=e.modules.__browserify_process(),r=!0);var o=e._core[i]?"":e.modules.path().dirname(i),u=function(t){var n=e(t,o),r=e.cache[e.resolve(t,o)];return r&&r.parent===null&&(r.parent=a),n};u.resolve=function(t){return e.resolve(t,o)},u.modules=e.modules,u.define=e.define,u.cache=e.cache;var a={id:i,filename:i,exports:{},loaded:!1,parent:null};e.modules[i]=function(){return e.cache[i]=a,s.call(a.exports,u,a,a.exports,o,i,t,n),a.loaded=!0,a.exports}}}(),e.define("path",function(e,t,n,r,i,s,o){function u(e,t){var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function a(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];i=="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var f=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){var e="",t=!1;for(var n=arguments.length;n>=-1&&!t;n--){var r=n>=0?arguments[n]:s.cwd();if(typeof r!="string"||!r)continue;e=r+"/"+e,t=r.charAt(0)==="/"}return e=a(u(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t=e.charAt(0)==="/",n=e.slice(-1)==="/";return e=a(u(e.split("/"),function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(u(e,function(e,t){return e&&typeof e=="string"}).join("/"))},n.dirname=function(e){var t=f.exec(e)[1]||"",n=!1;return t?t.length===1||n&&t.length<=3&&t.charAt(1)===":"?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=f.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return f.exec(e)[3]||""}}),e.define("__browserify_process",function(e,t,n,r,i,s,o){var s=t.exports={};s.nextTick=function(){var e=typeof window!="undefined"&&window.setImmediate,t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&e.data==="browserify-tick"){e.stopPropagation();if(n.length>0){var t=n.shift();t()}}},!0),function(t){n.push(t),window.postMessage("browserify-tick","*")}}return function(t){setTimeout(t,0)}}(),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.binding=function(t){if(t==="evals")return e("vm");throw new Error("No such module. (Possibly not yet loaded)")},function(){var t="/",n;s.cwd=function(){return t},s.chdir=function(r){n||(n=e("path")),t=n.resolve(r,t)}}()}),e.define("/lib/extended.js",function(e,t,n,r,i,s,o){t.exports=e("extended")().register(e("is-extended")).register(e("array-extended")).register(e("date-extended")).register(e("object-extended")).register(e("string-extended")).register(e("promise-extended")).register(e("function-extended")).register("declare",e("declare.js"))}),e.define("/node_modules/extended/package.json",function(e,t,n,r,i,s,o){t.exports={main:"index.js"}}),e.define("/node_modules/extended/index.js",function(e,t,n,r,i,s,o){(function(){"use strict";function r(e,t){function r(){var t={},n=e.define();return n.expose({register:function(t,r){r||(r=t,t=null);var i=typeof r;if(t)n[t]=r;else if(r&&i==="function")n.extend(r);else{if(i!=="object")throw new TypeError("extended.register must be called with an extender function");n.expose(r)}return n},define:function(){return e.define.apply(e,arguments)}}),n}function i(){return r()}var n=function(){function t(e,t){var n,r;for(n in t)if(t.hasOwnProperty(n)){r=t[n];if(!(n in e)||e[n]!==r)e[n]=r}return e}return function(n){n||(n={});for(var r=1,i=arguments.length;r<i;r++)t(n,arguments[r]);return n}}();return i.define=function(){return e.define.apply(e,arguments)},i}"undefined"!=typeof n?"undefined"!=typeof t&&t.exports&&(t.exports=r(e("extender"),e)):"function"==typeof define?define(["require"],function(e){return r(e("extender"),e)}):this.extended=r(this.extender)}).call(this)}),e.define("/node_modules/extended/node_modules/extender/package.json",function(e,t,n,r,i,s,o){t.exports={main:"index.js"}}),e.define("/node_modules/extended/node_modules/extender/index.js",function(e,t,n,r,i,s,o){t.exports=e("./extender.js")}),e.define("/node_modules/extended/node_modules/extender/extender.js",function(e,t,n,r,i,s,o){(function(){function r(e){function r(e,t){if(e&&e.length)for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function i(e){return Object.prototype.toString.call(e)==="[object Array]"}function o(r){function u(e,r,i){if("function"!=typeof i)throw new TypeError("when extending type you must provide a function");var s;r==="constructor"?s=function(){this._super(arguments),i.apply(this,arguments)}:s=function(){var r=t.call(arguments);r.unshift(this._value);var s=i.apply(this,r);return s!==n?this.__extender__(s):this},e[r]=s}function a(e,n,r){if("function"!=typeof r)throw new TypeError("when extending type you must provide a function");var i;n==="constructor"?i=function(){this._super(arguments),r.apply(this,arguments)}:i=function(){var n=t.call(arguments);return n.unshift(this._value),r.apply(this,n)},e[n]=i}function f(e,t,n){for(var r in t)t.hasOwnProperty(r)&&(r!=="getters"&&r!=="setters"?r==="noWrap"?f(e,t[r],!0):n?a(e,r,t[r]):u(e,r,t[r]):e[r]=t[r])}function l(e){var t=e,n,r;if(!(e instanceof i)){var u={},a=u.instance={__extender__:l};for(n=0,r=o.length;n<r;n++){var f=o[n];f[0](e)&&s(a,f[1])}t=new(i.extend(u))(e)}return t}function c(){return!0}function h(e,t){if(arguments.length){typeof e=="object"&&(t=e,e=c),t=t||{};var n={};f(n,t),o.push([e,n])}return l}function p(e){return e&&e.hasOwnProperty("__defined__")&&(l.__defined__=o=o.concat(e.__defined__)),s(l,e,["define","extend","expose","__defined__"]),l}r=r||[];var i=e({instance:{constructor:function(e){this._value=e},value:function(){return this._value},eq:function(t){return this.__extender__(this._value===t)},neq:function(t){return this.__extender__(this._value!==t)},print:function(){return console.log(this._value),this}}}),o=[];return l.define=h,l.extend=p,l.expose=function(){var t;for(var n=0,r=arguments.length;n<r;n++)t=arguments[n],typeof t=="object"&&s(l,t,["define","extend","expose","__defined__"]);return l},l.__defined__=o,l}var t=Array.prototype.slice,n,s=function(){function t(e,t,n){var i,s;for(i in t)if(t.hasOwnProperty(i)&&r(n,i)===-1){s=t[i];if(!(i in e)||e[i]!==s)e[i]=s}return e}return function(n){n||(n={});var r=arguments.length,s=arguments[arguments.length-1];i(s)?r--:s=[];for(var o=1;o<r;o++)t(n,arguments[o],s);return n}}();return{define:function(){return o().define.apply(o,arguments)},extend:function(e){return o().define().extend(e)}}}"undefined"!=typeof n?"undefined"!=typeof t&&t.exports&&(t.exports=r(e("declare.js"))):"function"==typeof define?define(["require"],function(e){return r(e("declare.js"))}):this.extender=r(this.declare)}).call(this)}),e.define("/node_modules/declare.js/package.json",function(e,t,n,r,i,s,o){t.exports={main:"index.js"}}),e.define("/node_modules/declare.js/index.js",function(e,t,n,r,i,s,o){t.exports=e("./declare.js")}),e.define("/node_modules/declare.js/declare.js",function(e,t,n,r,i,s,o){(function(){function e(){function i(t,n){return n=n||0,e.call(t,n)}function s(e){return Object.prototype.toString.call(e)==="[object Array]"}function o(e){var t;return e!==null&&e!==t&&typeof e=="object"}function u(e){var t=o(e);return t&&e.constructor===Object}function a(e,t){if(e&&e.length)for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function f(e,t,n){var r,i;for(r in t)if(t.hasOwnProperty(r)&&a(n,r)===-1){i=t[r];if(!(r in e)||e[r]!==i)e[r]=i}return e}function l(e,t){var n=this.__meta,r=n.supers,i=r.length,s=n.superMeta,o=s.pos;if(i>o){t&&(e=t);var u=s.name,a=s.f,f;do{f=r[o][u];if("function"==typeof f&&(f=f._f||f)!==a)return s.pos=1+o,f.apply(this,e)}while(i>++o)}return null}function c(){var e=this.__meta,t=e.supers,n=t.length,r=e.superMeta,i=r.pos;if(n>i){var s=r.name,o=r.f,u;do{u=t[i][s];if("function"==typeof u&&(u=u._f||u)!==o)return r.pos=1+i,u.bind(this)}while(n>++i)}return null}function h(e){var t=this.__getters__;return t.hasOwnProperty(e)?t[e].apply(this):this[e]}function p(e,t){var n=this.__setters__;if(!u(e))return n.hasOwnProperty(e)?n[e].apply(this,i(arguments,1)):this[e]=t;for(var r in e){var s=e[r];n.hasOwnProperty(r)?n[e].call(this,s):this[r]=s}}function d(){var e=this.__meta||{},t=e.supers,n=t.length,r=e.superMeta,i=r.pos;if(n>i){var s=r.name,o=r.f,u;do{u=t[i][s];if("function"==typeof u&&(u=u._f||u)!==o)return r.pos=1+i,u.apply(this,arguments)}while(n>++i)}return null}function v(e,t){var n=function(){var r,i=this.__meta||{},s=i.superMeta;return i.superMeta={f:e,pos:0,name:t},r=e.apply(this,arguments),i.superMeta=s,r};return n._f=e,n}function m(e,t){var n=t.setters||{},r=e.__setters__,i=e.__getters__;for(var s in n)r.hasOwnProperty(s)||(r[s]=n[s]);n=t.getters||{};for(s in n)i.hasOwnProperty(s)||(i[s]=n[s]);for(var o in t)if(o!="getters"&&o!="setters"){var u=t[o];"function"==typeof u?e.hasOwnProperty(o)||(e[o]=v(d,o)):e[o]=u}}function g(){var e=i(arguments),t=e.length,n=this.prototype,r=n.__meta,s=this.__meta,o=n.__meta.bases,u=o.slice(),a=s.supers||[],f=r.supers||[];for(var l=0;l<t;l++){var c=e[l],h=c.prototype,p=h.__meta,d=c.__meta;!p&&(p=h.__meta={proto:h||{}}),!d&&(d=c.__meta={proto:c.__proto__||{}}),m(n,p.proto||{}),m(this,d.proto||{}),y(c.prototype,f,o),y(c,a,u)}return this}function y(e,n,r){var i=e.__meta;!i&&(i=e.__meta={});var s=e.__meta.unique;!s&&(i.unique="declare"+ ++t);if(a(r,s)===-1){r.push(s);var o=e.__meta.supers||[],u=o.length-1||0;while(u>=0)y(o[u--],n,r);n.unshift(e)}}function b(e,t){var n=t.setters,r=e.__setters__,i=e.__getters__;if(n)for(var s in n)r[s]=n[s];n=t.getters||{};if(n)for(s in n)i[s]=n[s];for(s in t)if(s!="getters"&&s!="setters"){var o=t[s];if("function"==typeof o){var u=o.__meta||{};u.isConstructor?e[s]=o:e[s]=v(o,s)}else e[s]=o}}function w(e,t){return e&&t?e[t]=this:e.exports=e=this,this}function E(e){return T(this,e)}function S(e){r.prototype=e.prototype;var t=new r;return r.prototype=null,t}function x(e,r,i){var o={},a=[],h="declare"+ ++t,p=[],m=[],w=[],E=[],x={supers:w,unique:h,bases:p,superMeta:{f:null,pos:0,name:null}},T={supers:E,unique:h,bases:m,isConstructor:!0,superMeta:{f:null,pos:0,name:null}};u(r)&&!i&&(i=r,r=n),"function"==typeof r||s(r)?(a=s(r)?r:[r],r=a.shift(),e.__meta=T,o=S(r),o.__meta=x,o.__getters__=f({},o.__getters__||{}),o.__setters__=f({},o.__setters__||{}),e.__getters__=f({},e.__getters__||{}),e.__setters__=f({},e.__setters__||{}),y(r.prototype,w,p),y(r,E,m)):(e.__meta=T,o.__meta=x,o.__getters__=o.__getters__||{},o.__setters__=o.__setters__||{},e.__getters__=e.__getters__||{},e.__setters__=e.__setters__||{}),e.prototype=o;if(i){var N=x.proto=i.instance||{};!N.hasOwnProperty("constructor")&&(N.constructor=d);var C=T.proto=i.static||{};C.init=C.init||d,b(o,N),b(e,C)}else x.proto={},T.proto={},e.init=v(d,"init"),o.constructor=v(d,"constructor");a.length&&g.apply(e,a),r&&f(e,f(f({},r),e)),o._super=e._super=l,o._getSuper=e._getSuper=c,o._static=e}function T(e,t){function n(){this.constructor.apply(this,arguments)}return x(n,e,t),n.init()||n}function N(e,t){function r(){return n||(this.constructor.apply(this,arguments),n=this),n}var n;return x(r,e,t),r.init()||r}var e=Array.prototype.slice,t=0,n,r=new Function;return n=T({instance:{get:h,set:p},"static":{get:h,set:p,mixin:g,extend:E,as:w}}),T.singleton=N,T}"undefined"!=typeof n?"undefined"!=typeof t&&t.exports&&(t.exports=e()):"function"==typeof define?define(e):this.declare=e()})()}),e.define("/node_modules/is-extended/package.json",function(e,t,n,r,i,s,o){t.exports={main:"index.js"}}),e.define("/node_modules/is-extended/index.js",function(e,t,n,r,i,s,o){(function(){"use strict";function r(e){function r(e,t){return t=t||0,n.call(e,t)}function i(e,t){if(e===t)return!0;if(typeof Buffer!="undefined"&&Buffer.isBuffer(e)&&Buffer.isBuffer(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:typeof e!="object"&&typeof t!="object"?e===t:s(e,t)}function s(e,t){var r;if(p(e)||p(t))return!1;if(e.prototype!==t.prototype)return!1;if(v(e))return v(t)?(e=n.call(e),t=n.call(t),i(e,t)):!1;try{var s=Object.keys(e),o=Object.keys(t),u;if(s.length!==o.length)return!1;s.sort(),o.sort();for(u=s.length-1;u>=0;u--)if(s[u]!==o[u])return!1;for(u=s.length-1;u>=0;u--){r=s[u];if(!i(e[r],t[r]))return!1}}catch(a){return!1}return!0}function o(e){return typeof e=="function"}function u(e){var t;return e!==null&&e!==t&&typeof e=="object"}function a(e){var t=u(e);return t&&e.constructor===Object}function f(e){if(u(e)){for(var t in e)if(e.hasOwnProperty(t))return!1}else if(w(e)&&e==="")return!0;return!0}function l(e){return Object.prototype.toString.call(e)==="[object Boolean]"}function c(e){return e!==null&&e===t}function h(e){return!c(e)}function p(e){return c(e)||d(e)}function d(e){return e!==t&&e===null}function v(e){return!p(e)&&Object.prototype.toString.call(e)==="[object Arguments]"}function m(e,t){return o(t)?e instanceof t:!1}function g(e){return!p(e)&&e instanceof RegExp}function y(e){return Object.prototype.toString.call(e)==="[object Array]"}function b(e){return!p(e)&&typeof e=="object"&&e instanceof Date}function w(e){return!p(e)&&(typeof e=="string"||e instanceof String)}function E(e){return!p(e)&&(typeof e=="number"||e instanceof Number)}function S(e){return e===!0}function x(e){return e===!1}function T(e){return!d(e)}function N(e,t){return e==t}function C(e,t){return e!=t}function k(e,t){return e===t}function L(e,t){return e!==t}function A(e,t){if(y(t))for(var n=0,r=t.length;n<r;n++)if(N(e,t[n]))return!0;return!1}function O(e,t){return!A(e,t)}function M(e,t){return e<t}function _(e,t){return e<=t}function D(e,t){return e>t}function P(e,t){return e>=t}function H(e,t){return w(t)&&(t=new RegExp(t)),g(t)?t.test(""+e):!1}function B(e,t){return!H(e,t)}function j(e,t){return A(t,e)}function F(e,t){return!A(t,e)}function U(e){q[e]=function(){this._testers.push(I[e])}}function z(e){R[e]=function(){var n=r(arguments,1),i=I[e],s,u=!0;if(n.length<=i.length-1)throw new TypeError("A handler must be defined when calling using switch");s=n.pop(),l(s)&&(u=s,s=n.pop());if(!o(s))throw new TypeError("handler must be defined");this._cases.push(function(e){return i.apply(I,e.concat(n))?[u,s.apply(this,e)]:[!1]})}}var t,n=Array.prototype.slice,I={isFunction:o,isObject:u,isEmpty:f,isHash:a,isNumber:E,isString:w,isDate:b,isArray:y,isBoolean:l,isUndefined:c,isDefined:h,isUndefinedOrNull:p,isNull:d,isArguments:v,instanceOf:m,isRegExp:g,deepEqual:i,isTrue:S,isFalse:x,isNotNull:T,isEq:N,isNeq:C,isSeq:k,isSneq:L,isIn:A,isNotIn:O,isLt:M,isLte:_,isGt:D,isGte:P,isLike:H,isNotLike:B,contains:j,notContains:F},q={constructor:function(){this._testers=[]},noWrap:{tester:function(){var e=this._testers;return function(n){var r=!1;for(var i=0,s=e.length;i<s&&!r;i++)r=e[i](n);return r}}}},R={constructor:function(){this._cases=[],this.__default=null},def:function(e,t){this.__default=t},noWrap:{switcher:function(){var e=this._cases,t=this.__default;return function(){var i=!1,s=r(arguments),o;for(var u=0,a=e.length;u<a&&!i;u++){o=e[u](s);if(o.length>1)if(o[1]||o[0])return o[1]}if(!i&&t)return t.apply(this,s)}}}};for(var W in I)I.hasOwnProperty(W)&&(z(W),U(W));var X=e.define(I).expose(I);return X.tester=e.define(q),X.switcher=e.define(R),X}"undefined"!=typeof n?"undefined"!=typeof t&&t.exports&&(t.exports=r(e("extended"))):"function"==typeof define?define(["require"],function(e){return r(e("extended"))}):this.is=r(this.extended)}).call(this)}),e.define("/node_modules/array-extended/package.json",function(e,t,n,r,i,s,o){t.exports={main:"index.js"}}),e.define("/node_modules/array-extended/index.js",function(e,t,n,r,i,s,o){(function(){"use strict";function i(e,t){return t=t||0,r.call(e,t)}function s(e,t){function l(e,t){return S(t,function(t,n){return r(n)||(n=[n]),n.unshift(e),t.unshift(n),t},[])}function c(e,t,n){var r=[];for(var i=0;i<t.length;i++)r.push([e].concat(_(t,i)).slice(0,n));return r}function h(e,t){var n=[],i;if(r(e)&&r(t)&&e.length&&t.length)for(var s=0,o=e.length;s<o;s++)i=e[s],d(t,i)!==-1&&n.push(i);return n}function d(e,t){if(!r(e))throw new TypeError;var n=Object(e),i=n.length>>>0;if(i===0)return-1;var s=0;arguments.length>2&&(s=Number(arguments[2]),s!==s?s=0:s!==0&&s!==Infinity&&s!==-Infinity&&(s=(s>0||-1)*o(u(s))));if(s>=i)return-1;var f=s>=0?s:a(i-u(s),0);for(;f<i;f++)if(f in n&&n[f]===t)return f;return-1}function v(e,t){if(!r(e))throw new TypeError;var n=Object(e),i=n.length>>>0;if(i===0)return-1;var s=i;arguments.length>2&&(s=Number(arguments[2]),s!==s?s=0:s!==0&&s!==1/0&&s!==-1/0&&(s=(s>0||-1)*o(u(s))));var a=s>=0?f(s,i-1):i-u(s);for(;a>=0;a--)if(a in n&&n[a]===t)return a;return-1}function m(e,t,n){if(!r(e)||typeof t!="function")throw new TypeError;var i=Object(e),s=i.length>>>0,o=[];for(var u=0;u<s;u++)if(u in i){var a=i[u];t.call(n,a,u,i)&&o.push(a)}return o}function g(e,t,n){if(!r(e)||typeof t!="function")throw new TypeError;for(var i=0,s=e.length;i<s;++i)t.call(n||e,e[i],i,e);return e}function y(e,t,n){if(!r(e)||typeof t!="function")throw new TypeError;var i=Object(e),s=i.length>>>0;for(var o=0;o<s;o++)if(o in i&&!t.call(n,i[o],o,i))return!1;return!0}function b(e,t,n){if(!r(e)||typeof t!="function")throw new TypeError;var i=Object(e),s=i.length>>>0;for(var o=0;o<s;o++)if(o in i&&t.call(n,i[o],o,i))return!0;return!1}function w(e,t,n){if(!r(e)||typeof t!="function")throw new TypeError;var i=Object(e),s=i.length>>>0,o=[];for(var u=0;u<s;u++)u in i&&o.push(t.call(n,i[u],u,i));return o}function E(e,t,n){if(!r(e)||typeof t!="function")throw new TypeError;var i=0,s=e.length>>0;if(arguments.length<3){if(s===0)throw new TypeError("Array length is 0 and no second argument");n=e[0],i=1}else n=arguments[2];while(i<s)i in e&&(n=t.call(undefined,n,e[i],i,e)),++i;return n}function S(e,t,n){if(!r(e)||typeof t!="function")throw new TypeError;var i=Object(e),s=i.length>>>0;if(s===0&&arguments.length===2)throw new TypeError;var o=s-1;if(arguments.length>=3)n=arguments[2];else do if(o in e){n=e[o--];break}while(!0);while(o>=0)o in i&&(n=t.call(undefined,n,i[o],o,i)),o--;return n}function x(e){var n=[];if(e!==null){var s=i(arguments);if(s.length===1)if(r(e))n=e;else if(t.isHash(e))for(var o in e)e.hasOwnProperty(o)&&n.push([o,e[o]]);else n.push(e);else g(s,function(e){n=n.concat(x(e))})}return n}function T(e){return e=e||[],e.length?E(e,function(e,t){return e+t}):0}function N(e){e=e||[];if(e.length){var n=T(e);if(t.isNumber(n))return n/e.length;throw new Error("Cannot average an array of non numbers.")}return 0}function C(e,t){return p(e,t)}function k(e,t){return p(e,t)[0]}function L(e,t){return p(e,t)[e.length-1]}function A(e){var t=e,n=z(i(arguments,1));return r(e)&&(t=m(e,function(e){return d(n,e)===-1})),t}function O(e){var t=e;return r(e)&&(t=E(e,function(e,t){return d(e,t)===-1?e.concat(t):e},[])),t}function M(e){return O(e)}function _(e,t){var n=e.slice();return typeof t!="number"&&(t=1),t&&r(e)?(t>0?(n.push(n.shift()),t--):(n.unshift(n.pop()),t++),_(n,t)):n}function D(e,t){var n=[];if(r(e)){var i=e.slice(0);typeof t!="number"&&(t=e.length),t?t<=e.length&&(n=E(e,function(e,n,r){var s;return t>1?s=c(n,_(i,r).slice(1),t):s=[[n]],e.concat(s)},[])):n=[[]]}return n}function P(){var e=[],n=i(arguments);if(n.length>1){var s=n.shift();r(s)&&(e=E(s,function(e,i,s){var o=[i];for(var u=0;u<n.length;u++){var a=n[u];r(a)&&!t.isUndefined(a[s])?o.push(a[s]):o.push(null)}return e.push(o),e},[]))}return e}function H(e){var t=[];if(r(e)&&e.length){var n;g(e,function(e){r(e)&&(!n||e.length===n.length)&&(g(e,function(e,n){t[n]||(t[n]=[]),t[n].push(e)}),n=e)})}return t}function B(e,t){var n=[];t=i(arguments),e=t.shift();if(r(e)&&t.length)for(var s=0,o=t.length;s<o;s++)n.push(e[t[s]]||null);return n}function j(){var e=[],t=i(arguments);return t.length>1&&(e=O(E(t,function(e,t){return e.concat(t)},[]))),e}function F(){var e=[],t,n=i(arguments);n.length>1?t=n:t=n[0];if(r(t)){var s=t.shift();e=E(t,function(e,t){return h(e,t)},s)}return O(e)}function I(e){var t=[];return r(e)&&e.length&&(t=E(e,function(e,t){var n=w(e,function(e){return e.concat(t)});return e.concat(n)},[[]])),t}function q(e,t){var n=[];return r(e)&&r(t)&&e.length&&t.length&&(n=l(e[0],t).concat(q(e.slice(1),t))),n}function R(e){var n=[];return r(e)&&e.length&&(n=m(e,function(e){return!t.isUndefinedOrNull(e)})),n}function U(e,n){n=t.isNumber(n)?n:1,n||(n=1),e=x(e||[]);var r=[],i=0;while(++i<=n)r=r.concat(e);return r}function z(e){var t,n=i(arguments);return n.length>1?t=n:t=x(e),E(t,function(e,t){return e.concat(t)},[])}function W(e,t){t=t.split(".");var n=e.slice(0);return g(t,function(e){var t=e.match(/(\w+)\(\)$/);n=w(n,function(n){return t?n[t[1]]():n[e]})}),n}function X(e,t,r){return r=i(arguments,2),w(e,function(e){var i=n(t)?e[t]:t;return i.apply(e,r)})}var n=t.isString,r=t.isArray,s=t.isDate,o=Math.floor,u=Math.abs,a=Math.max,f=Math.min,p=function(){var e=function(e,t){return y(e,t)},t=function(e,t){return e-t},i=function(e,t){return e.getTime()-t.getTime()};return function(u,a){var f=[];return r(u)&&(f=u.slice(),a?typeof a=="function"?f.sort(a):f.sort(function(e,t){var r=e[a],i=t[a];return n(r)&&n(i)?r>i?1:r<i?-1:0:s(r)&&s(i)?r.getTime()-i.getTime():r-i}):e(f,n)?f.sort():e(f,s)?f.sort(i):f.sort(t)),f}}(),V={toArray:x,sum:T,avg:N,sort:C,min:k,max:L,difference:A,removeDuplicates:O,unique:M,rotate:_,permutations:D,zip:P,transpose:H,valuesAt:B,union:j,intersect:F,powerSet:I,cartesian:q,compact:R,multiply:U,flatten:z,pluck:W,invoke:X,forEach:g,map:w,filter:m,reduce:E,reduceRight:S,some:b,every:y,indexOf:d,lastIndexOf:v};return e.define(r,V).expose(V)}var r=Array.prototype.slice;"undefined"!=typeof n?"undefined"!=typeof t&&t.exports&&(t.exports=s(e("extended"),e("is-extended"))):"function"==typeof define?define(["require"],function(e){return s(e("extended"),e("is-extended"))}):this.arrayExtended=s(this.extended,this.isExtended)}).call(this)}),e.define("/node_modules/date-extended/package.json",function(e,t,n,r,i,s,o){t.exports={main:"index.js"}}),e.define("/node_modules/date-extended/index.js",function(e,t,n,r,i,s,o){(function(){"use strict";function r(e,t){function n(e,t,n,r){e=""+e,n=n||" ";var i=e.length;while(i<t)r?e+=n:e=n+e,i++;return e}function r(e,n,i){var s=e;if(t.isString(s)){if(e.length>n)if(i){var o=e.length;s=e.substring(o-n,o)}else s=e.substring(0,n)}else s=r(""+s,n);return s}function i(e,n,r){if(!t.isArray(e)||typeof n!="function")throw new TypeError;var i=Object(e),s=i.length>>>0;for(var o=0;o<s;o++)if(o in i&&!n.call(r,i[o],o,i))return!1;return!0}function w(e,t){return T.difference(new Date(e.getFullYear(),0,1,e.getHours()),e,null,t)+1}function E(e,t,n){t=t||0;var r=e[n?"getUTCFullYear":"getFullYear"](),i=(new Date(r,0,1)).getDay(),s=(i-t+7)%7,o=a((w(e)+s-1)/7);return i===t&&o++,o}function S(e){var t=e.toString(),n="",r=t.indexOf("(");return r>-1&&(n=t.substring(++r,t.indexOf(")"))),n}function x(e,t){return e.replace(/([a-z])\1*/ig,function(e){var n,r=e.charAt(0),i=e.length,s="0?",o="0{0,2}";if(r==="y")n="\\d{2,4}";else if(r==="M")n=i>2?"\\S+?":"1[0-2]|"+s+"[1-9]";else if(r==="D")n="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+o+"[1-9][0-9]|"+s+"[1-9]";else if(r==="d")n="3[01]|[12]\\d|"+s+"[1-9]";else if(r==="w")n="[1-4][0-9]|5[0-3]|"+s+"[1-9]";else if(r==="E")n="\\S+";else if(r==="h")n="1[0-2]|"+s+"[1-9]";else if(r==="K")n="1[01]|"+s+"\\d";else if(r==="H")n="1\\d|2[0-3]|"+s+"\\d";else if(r==="k")n="1\\d|2[0-4]|"+s+"[1-9]";else if(r==="m"||r==="s")n="[0-5]\\d";else if(r==="S")n="\\d{"+i+"}";else if(r==="a"){var u="AM",a="PM";n=u+"|"+a,u!==u.toLowerCase()&&(n+="|"+u.toLowerCase()),a!==a.toLowerCase()&&(n+="|"+a.toLowerCase()),n=n.replace(/\./g,"\\.")}else r==="v"||r==="z"||r==="Z"||r==="G"||r==="q"||r==="Q"?n=".*":n=r===" "?"\\s*":r+"*";return t&&t.push(e),"("+n+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}function C(e){N[e+"sFromNow"]=function(t){return T.add(new Date,e,t)},N[e+"sAgo"]=function(t){return T.add(new Date,e,-t)}}var s=function(){function r(e,t,r){return e=e.replace(/s$/,""),n.hasOwnProperty(e)?n[e](t,r):[r,"UTC"+e.charAt(0).toUpperCase()+e.substring(1)+"s",!1]}function s(e,n,r,s){return e=e.replace(/s$/,""),t(i[e](n,r,s))}var e=Math.floor,t=Math.round,n={day:function(t,n){return[n,"Date",!1]},weekday:function(t,n){var r,i,s=n%5,o=t.getDay(),u=0;s?(r=s,i=parseInt(n/5,10)):(r=n>0?5:-5,i=n>0?(n-5)/5:(n+5)/5),o===6&&n>0?u=1:o===0&&n<0&&(u=-1);var a=o+r;if(a===0||a===6)u=n>0?2:-2;return[7*i+r+u,"Date",!1]},year:function(t,n){return[n,"FullYear",!0]},week:function(t,n){return[n*7,"Date",!1]},quarter:function(t,n){return[n*3,"Month",!0]},month:function(t,n){return[n,"Month",!0]}},i={quarter:function(n,r,i){var s=r.getFullYear()-n.getFullYear(),o=n[i?"getUTCMonth":"getMonth"](),u=r[i?"getUTCMonth":"getMonth"](),a=e(o/3)+1,f=e(u/3)+1;return f+=s*4,f-a},weekday:function(t,n,r){var i=s("day",t,n,r),o,u=i%7;if(u===0)i=s("week",t,n,r)*5;else{var a=0,f=t[r?"getUTCDay":"getDay"](),l=n[r?"getUTCDay":"getDay"]();o=parseInt(i/7,10);var c=new Date(t);c.setDate(c[r?"getUTCDate":"getDate"]()+o*7);var h=c[r?"getUTCDay":"getDay"]();if(i>0){if(f===6||l===6)a=-1;else if(f===0)a=0;else if(l===0||h+u>5)a=-2}else if(i<0)if(f===6)a=0;else if(f===0||l===0)a=1;else if(l===6||h+u<0)a=2;i+=a,i-=o*2}return i},year:function(e,t){return t.getFullYear()-e.getFullYear()},month:function(e,t,n){var r=e[n?"getUTCMonth":"getMonth"](),i=t[n?"getUTCMonth":"getMonth"]();return i-r+(t.getFullYear()-e.getFullYear())*12},week:function(e,n,r){return t(s("day",e,n,r)/7)},day:function(e,t){return 1.1574074074074074e-8*(t.getTime()-e.getTime())},hour:function(e,t){return 2.7777777777777776e-7*(t.getTime()-e.getTime())},minute:function(e,t){return 16666666666666667e-21*(t.getTime()-e.getTime())},second:function(e,t){return.001*(t.getTime()-e.getTime())},millisecond:function(e,t){return t.getTime()-e.getTime()}};return{addTransform:r,differenceTransform:s}}(),o=s.addTransform,u=s.differenceTransform,a=Math.floor,f=Math.round,l=Math.min,c=Math.pow,h=Math.ceil,p=Math.abs,d=["January","February","March","April","May","June","July","August","September","October","November","December"],v=["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],y=["Before Christ","Anno Domini"],b=["BC","AD"],T={getDaysInMonth:function(e){var t=e.getMonth(),n=[31,28,31,30,31,30,31,31,30,31,30,31];return t===1&&T.isLeapYear(e)?29:n[t]},isLeapYear:function(e,t){var n=e[t?"getUTCFullYear":"getFullYear"]();return n%400===0||n%4===0&&n%100!==0},isWeekend:function(e,t){var n=(e||new Date)[t?"getUTCDay":"getDay"]();return n===0||n===6},getTimezoneName:S,compare:function(e,t,n){return e=new Date(e),t=new Date(t||new Date),n==="date"?(e.setHours(0,0,0,0),t.setHours(0,0,0,0)):n==="time"&&(e.setFullYear(0,0,0),t.setFullYear(0,0,0)),e>t?1:e<t?-1:0},add:function(e,t,n){var r=o(t,e,n||0);n=r[0];var i=r[1],s=new Date(e),u=r[2];return i&&s["set"+i](s["get"+i]()+n),u&&s.getDate()<e.getDate()&&s.setDate(0),s},difference:function(e,t,n,r){return t=t||new Date,n=n||"day",u(n,e,t,r)},format:function(e,t,i){i=i||!1;var s,o,u,l,x,T,N,C;return i?(s=e.getUTCFullYear(),o=e.getUTCMonth(),u=e.getUTCDay(),l=e.getUTCDate(),x=e.getUTCHours(),T=e.getUTCMinutes(),N=e.getUTCSeconds(),C=e.getUTCMilliseconds()):(s=e.getFullYear(),o=e.getMonth(),l=e.getDate(),u=e.getDay(),x=e.getHours(),T=e.getMinutes(),N=e.getSeconds(),C=e.getMilliseconds()),t.replace(/([A-Za-z])\1*/g,function(t){var k,L,A=t.charAt(0),O=t.length;if(A==="d")k=""+l,L=!0;else if(A==="H"&&!k)k=""+x,L=!0;else if(A==="m"&&!k)k=""+T,L=!0;else if(A==="s")k||(k=""+N),L=!0;else if(A==="G")k=(O<4?b:y)[s<0?0:1];else if(A==="y")k=s,O>1&&(O===2?k=r(""+k,2,!0):L=!0);else if(A.toUpperCase()==="Q")k=h((o+1)/3),L=!0;else if(A==="M")O<3?(k=o+1,L=!0):k=(O===3?v:d)[o];else if(A==="w")k=E(e,0,i),L=!0;else if(A==="D")k=w(e,i),L=!0;else if(A==="E")O<3?(k=u+1,L=!0):k=(O===-3?g:m)[u];else if(A==="a")k=x<12?"AM":"PM";else if(A==="h")k=x%12||12,L=!0;else if(A==="K")k=x%12,L=!0;else if(A==="k")k=x||24,L=!0;else if(A==="S")k=f(C*c(10,O-3)),L=!0;else if(A==="z"||A==="v"||A==="Z"){k=S(e),(A==="z"||A==="v")&&!k&&(O=4);if(!k||A==="Z"){var M=e.getTimezoneOffset(),_=[M>=0?"-":"+",n(a(p(M)/60),2,"0"),n(p(M)%60,2,"0")];O===4&&(_.splice(0,0,"GMT"),_.splice(3,0,":")),k=_.join("")}}else k=t;return L&&(k=n(k,O,"0")),k})}},N={},k=["year","month","day","hour","minute","second"],L;for(var A=0,O=k.length;A<O;A++)C(k[A]);var M={parseDate:function(e,t){if(!t)throw new Error("format required when calling dateExtender.parse");var n=[],r=x(t,n),s=new RegExp("^"+r+"$","i"),o=s.exec(e);if(!o)return null;var u=[1970,0,1,0,0,0,0],a="",f=i(o,function(e,t){if(t){var r=n[t-1],i=r.length,s=r.charAt(0);if(s==="y")if(e<100){e=parseInt(e,10);var o=""+(new Date).getFullYear(),f=o.substring(0,2)*100,c=l(o.substring(2,4)+20,99);u[0]=e<c?f+e:f-100+e}else u[0]=e;else if(s==="M"){if(i>2){var h=d,p,y;i===3&&(h=v),e=e.replace(".","").toLowerCase();var b=!1;for(p=0,y=h.length;p<y&&!b;p++){var w=h[p].replace(".","").toLocaleLowerCase();w===e&&(e=p,b=!0)}if(!b)return!1}else e--;u[1]=e}else if(s==="E"||s==="e"){var E=m;i===3&&(E=g),e=e.toLowerCase(),E=E.map(function(e){return e.toLowerCase()});var S=E.indexOf(e);if(S===-1){e=parseInt(e,10);if(isNaN(e)||e>E.length)return!1}else e=S}else if(s==="D"||s==="d")s==="D"&&(u[1]=0),u[2]=e;else if(s==="a"){var x="am",T="pm",N=/\./g;e=e.replace(N,"").toLowerCase(),a=e===T?"p":e===x?"a":""}else s==="k"||s==="h"||s==="H"||s==="K"?(s==="k"&&+e===24&&(e=0),u[3]=e):s==="m"?u[4]=e:s==="s"?u[5]=e:s==="S"&&(u[6]=e)}return!0});if(f){var c=+u[3];a==="p"&&c<12?u[3]=c+12:a==="a"&&c===12&&(u[3]=0);var h=new Date(u[0],u[1],u[2],u[3],u[4],u[5],u[6]),p=n.indexOf("d")!==-1,y=n.indexOf("M")!==-1,b=u[1],w=u[2],E=h.getMonth(),S=h.getDate();return y&&E>b||p&&S>w?null:h}return null}},_=e.define(t.isDate,T).define(t.isString,M).define(t.isNumber,N);for(A in T)T.hasOwnProperty(A)&&(_[A]=T[A]);for(A in M)M.hasOwnProperty(A)&&(_[A]=M[A]);for(A in N)N.hasOwnProperty(A)&&(_[A]=N[A]);return _}"undefined"!=typeof n?"undefined"!=typeof t&&t.exports&&(t.exports=r(e("extended"),e("is-extended"))):"function"==typeof define?define(["require"],function(e){return r(e("extended"),e("is-extended"))}):this.dateExtended=r(this.extended,this.isExtended)}).call(this)}),e.define("/node_modules/object-extended/package.json",function(e,t,n,r,i,s,o){t.exports={main:"index.js"}}),e.define("/node_modules/object-extended/index.js",function(e,t,n,r,i,s,o){(function(){"use strict";function r(e,t){function i(e,t){var n,r;for(n in t)if(t.hasOwnProperty(n)){r=t[n];if(!(n in e)||e[n]!==r)e[n]=r}return e}function s(e,t){var i,o,u;for(i in t)t.hasOwnProperty(i)&&(o=t[i],u=e[i],n(u,o)||(r(u)&&r(o)?e[i]=s(u,o):r(o)?e[i]=s({},o):e[i]=o));return e}function o(e){e||(e={});for(var t=1,n=arguments.length;t<n;t++)i(e,arguments[t]);return e}function u(e){e||(e={});for(var t=1,n=arguments.length;t<n;t++)s(e,arguments[t]);return e}function a(e,t){var n=e.prototype||e;return o(n,t),e}function f(e,t,n){if(!r(e)||typeof t!="function")throw new TypeError;var i=h(e),s;for(var o=0,u=i.length;o<u;++o)s=i[o],t.call(n||e,e[s],s,e);return e}function l(e,t,n){if(!r(e)||typeof t!="function")throw new TypeError;var i=h(e),s,o,u={};for(var a=0,f=i.length;a<f;++a)s=i[a],o=e[s],t.call(n||e,o,s,e)&&(u[s]=o);return u}function c(e){if(!r(e))throw new TypeError;var t=h(e),n=[];for(var i=0,s=t.length;i<s;++i)n.push(e[t[i]]);return n}function h(e){if(!r(e))throw new TypeError;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function p(e){if(!r(e))throw new TypeError;var t=h(e),n,i={};for(var s=0,o=t.length;s<o;++s)n=t[s],i[e[n]]=n;return i}function d(e){if(!r(e))throw new TypeError;var t=h(e),n,i=[];for(var s=0,o=t.length;s<o;++s)n=t[s],i.push([n,e[n]]);return i}var n=t.deepEqual,r=t.isHash,v={forEach:f,filter:l,invert:p,values:c,toArray:d,keys:h},m={extend:a,merge:o,deepMerge:u},g=e.define(t.isObject,m).define(r,v).define(t.isFunction,{extend:a}).expose({hash:v}).expose(m),y=g.extend;return g.extend=function(){if(arguments.length===1)return y.extend.apply(g,arguments);a.apply(null,arguments)},g}"undefined"!=typeof n?"undefined"!=typeof t&&t.exports&&(t.exports=r(e("extended"),e("is-extended"))):"function"==typeof define?define(["require"],function(e){return r(e("extended"),e("is-extended"))}):this.objectExtended=r(extended,isExtended)}).call(this)}),e.define("/node_modules/string-extended/package.json",function(e,t,n,r,i,s,o){t.exports={main:"index.js"}}),e.define("/node_modules/string-extended/index.js",function(e,t,n,r,i,s,o){(function(){"use strict";function r(e,t,n){function f(e,t){var n=e;if(u.test(t)){var r=t.match(u),i=r[1],s=r[3],o=r[4];o&&(o=parseInt(o,10),n.length<o?n=d(n,o,s,i):n=v(n,o))}return n}function l(e,n){var r;if(!t.isNumber(e))throw new Error("stringExtended.format : when using %d the parameter must be a number!");r=""+e;if(u.test(n)){var i=n.match(u),s=i[1],o=i[2],a=i[3],f=i[4];o&&(r=(e>0?"+":"")+r),f&&(f=parseInt(f,10),r.length<f?r=d(r,f,a||"0",s):r=v(r,f))}return r}function c(e,t){var n,r=t.match(a),i=0;r&&(i=parseInt(r[0],10),isNaN(i)&&(i=0));try{n=JSON.stringify(e,null,i)}catch(s){throw new Error("stringExtended.format : Unable to parse json from ",e)}return n}function d(e,t,n,r){e=""+e,n=n||" ";var i=e.length;while(i<t)r?e+=n:e=n+e,i++;return e}function v(e,n,r){var i=e;if(t.isString(i)){if(e.length>n)if(r){var s=e.length;i=e.substring(s-n,s)}else i=e.substring(0,n)}else i=v(""+i,n);return i}function m(e,u){if(u instanceof Array){var a=0,h=u.length;return e.replace(s,function(e,t,r){var i,s;if(a<h){i=u[a++];if(e==="%s"||e==="%d"||e==="%D")s=i+"";else if(e==="%Z")s=i.toUTCString();else if(e==="%j")try{s=JSON.stringify(i)}catch(o){throw new Error("stringExtended.format : Unable to parse json from ",i)}else{t=t.replace(/^\[|\]$/g,"");switch(r){case"s":s=f(i,t);break;case"d":s=l(i,t);break;case"j":s=c(i,t);break;case"D":s=n.format(i,t);break;case"Z":s=n.format(i,t,!0)}}return s}return e})}if(r(u))return e.replace(o,function(e,r,i){i=u[i];if(!t.isUndefined(i)){if(!r)return""+i;if(t.isString(i))return f(i,r);if(t.isNumber(i))return l(i,r);if(t.isDate(i))return n.format(i,r);if(t.isObject(i))return c(i,r)}return e});var p=i.call(arguments).slice(1);return m(e,p)}function g(e,t){var n=[];return e&&(e.indexOf(t)>0?n=e.replace(/\s+/g,"").split(t):n.push(e)),n}function y(e,t){var n=[];if(t)for(var r=0;r<t;r++)n.push(e);return n.join("")}function b(e,n){var r,i,s;if(n)if(t.isArray(e)){r=[];for(i=0,s=e.length;i<s;i++)r.push(b(e[i],n))}else if(n instanceof Array){r=e;for(i=0,s=n.length;i<s;i++)r=b(r,n[i])}else n in h&&(r="["+h[n]+"m"+e+"[0m");return r}var r=t.isHash,i=Array.prototype.slice,s=/%((?:-?\+?.?\d*)?|(?:\[[^\[|\]]*\]))?([sjdDZ])/g,o=/\{(?:\[([^\[|\]]*)\])?(\w+)\}/g,u=/(-?)(\+?)([A-Z|a-z|\W]?)([1-9][0-9]*)?$/,a=/([1-9][0-9]*)$/g,h={bold:1,bright:1,italic:3,underline:4,blink:5,inverse:7,crossedOut:9,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,redBackground:41,greenBackground:42,yellowBackground:43,blueBackground:44,magentaBackground:45,cyanBackground:46,whiteBackground:47,encircled:52,overlined:53,grey:90,black:90},p={SMILEY:"☺",SOLID_SMILEY:"☻",HEART:"♥",DIAMOND:"♦",CLOVE:"♣",SPADE:"♠",DOT:"•",SQUARE_CIRCLE:"◘",CIRCLE:"○",FILLED_SQUARE_CIRCLE:"◙",MALE:"♂",FEMALE:"♀",EIGHT_NOTE:"♪",DOUBLE_EIGHTH_NOTE:"♫",SUN:"☼",PLAY:"►",REWIND:"◄",UP_DOWN:"↕",PILCROW:"¶",SECTION:"§",THICK_MINUS:"▬",SMALL_UP_DOWN:"↨",UP_ARROW:"↑",DOWN_ARROW:"↓",RIGHT_ARROW:"→",LEFT_ARROW:"←",RIGHT_ANGLE:"∟",LEFT_RIGHT_ARROW:"↔",TRIANGLE:"▲",DOWN_TRIANGLE:"▼",HOUSE:"⌂",C_CEDILLA:"Ç",U_UMLAUT:"ü",E_ACCENT:"é",A_LOWER_CIRCUMFLEX:"â",A_LOWER_UMLAUT:"ä",A_LOWER_GRAVE_ACCENT:"à",A_LOWER_CIRCLE_OVER:"å",C_LOWER_CIRCUMFLEX:"ç",E_LOWER_CIRCUMFLEX:"ê",E_LOWER_UMLAUT:"ë",E_LOWER_GRAVE_ACCENT:"è",I_LOWER_UMLAUT:"ï",I_LOWER_CIRCUMFLEX:"î",I_LOWER_GRAVE_ACCENT:"ì",A_UPPER_UMLAUT:"Ä",A_UPPER_CIRCLE:"Å",E_UPPER_ACCENT:"É",A_E_LOWER:"æ",A_E_UPPER:"Æ",O_LOWER_CIRCUMFLEX:"ô",O_LOWER_UMLAUT:"ö",O_LOWER_GRAVE_ACCENT:"ò",U_LOWER_CIRCUMFLEX:"û",U_LOWER_GRAVE_ACCENT:"ù",Y_LOWER_UMLAUT:"ÿ",O_UPPER_UMLAUT:"Ö",U_UPPER_UMLAUT:"Ü",CENTS:"¢",POUND:"£",YEN:"¥",CURRENCY:"¤",PTS:"₧",FUNCTION:"ƒ",A_LOWER_ACCENT:"á",I_LOWER_ACCENT:"í",O_LOWER_ACCENT:"ó",U_LOWER_ACCENT:"ú",N_LOWER_TILDE:"ñ",N_UPPER_TILDE:"Ñ",A_SUPER:"ª",O_SUPER:"º",UPSIDEDOWN_QUESTION:"¿",SIDEWAYS_L:"⌐",NEGATION:"¬",ONE_HALF:"½",ONE_FOURTH:"¼",UPSIDEDOWN_EXCLAMATION:"¡",DOUBLE_LEFT:"«",DOUBLE_RIGHT:"»",LIGHT_SHADED_BOX:"░",MEDIUM_SHADED_BOX:"▒",DARK_SHADED_BOX:"▓",VERTICAL_LINE:"│",MAZE__SINGLE_RIGHT_T:"┤",MAZE_SINGLE_RIGHT_TOP:"┐",MAZE_SINGLE_RIGHT_BOTTOM_SMALL:"┘",MAZE_SINGLE_LEFT_TOP_SMALL:"┌",MAZE_SINGLE_LEFT_BOTTOM_SMALL:"└",MAZE_SINGLE_LEFT_T:"├",MAZE_SINGLE_BOTTOM_T:"┴",MAZE_SINGLE_TOP_T:"┬",MAZE_SINGLE_CENTER:"┼",MAZE_SINGLE_HORIZONTAL_LINE:"─",MAZE_SINGLE_RIGHT_DOUBLECENTER_T:"╡",MAZE_SINGLE_RIGHT_DOUBLE_BL:"╛",MAZE_SINGLE_RIGHT_DOUBLE_T:"╢",MAZE_SINGLE_RIGHT_DOUBLEBOTTOM_TOP:"╖",MAZE_SINGLE_RIGHT_DOUBLELEFT_TOP:"╕",MAZE_SINGLE_LEFT_DOUBLE_T:"╞",MAZE_SINGLE_BOTTOM_DOUBLE_T:"╧",MAZE_SINGLE_TOP_DOUBLE_T:"╤",MAZE_SINGLE_TOP_DOUBLECENTER_T:"╥",MAZE_SINGLE_BOTTOM_DOUBLECENTER_T:"╨",MAZE_SINGLE_LEFT_DOUBLERIGHT_BOTTOM:"╘",MAZE_SINGLE_LEFT_DOUBLERIGHT_TOP:"╒",MAZE_SINGLE_LEFT_DOUBLEBOTTOM_TOP:"╓",MAZE_SINGLE_LEFT_DOUBLETOP_BOTTOM:"╙",MAZE_SINGLE_LEFT_TOP:"Γ",MAZE_SINGLE_RIGHT_BOTTOM:"╜",MAZE_SINGLE_LEFT_CENTER:"╟",MAZE_SINGLE_DOUBLECENTER_CENTER:"╫",MAZE_SINGLE_DOUBLECROSS_CENTER:"╪",MAZE_DOUBLE_LEFT_CENTER:"╣",MAZE_DOUBLE_VERTICAL:"║",MAZE_DOUBLE_RIGHT_TOP:"╗",MAZE_DOUBLE_RIGHT_BOTTOM:"╝",MAZE_DOUBLE_LEFT_BOTTOM:"╚",MAZE_DOUBLE_LEFT_TOP:"╔",MAZE_DOUBLE_BOTTOM_T:"╩",MAZE_DOUBLE_TOP_T:"╦",MAZE_DOUBLE_LEFT_T:"╠",MAZE_DOUBLE_HORIZONTAL:"═",MAZE_DOUBLE_CROSS:"╬",SOLID_RECTANGLE:"█",THICK_LEFT_VERTICAL:"▌",THICK_RIGHT_VERTICAL:"▐",SOLID_SMALL_RECTANGLE_BOTTOM:"▄",SOLID_SMALL_RECTANGLE_TOP:"▀",PHI_UPPER:"Φ",INFINITY:"∞",INTERSECTION:"∩",DEFINITION:"≡",PLUS_MINUS:"±",GT_EQ:"≥",LT_EQ:"≤",THEREFORE:"⌠",SINCE:"∵",DOESNOT_EXIST:"∄",EXISTS:"∃",FOR_ALL:"∀",EXCLUSIVE_OR:"⊕",BECAUSE:"⌡",DIVIDE:"÷",APPROX:"≈",DEGREE:"°",BOLD_DOT:"∙",DOT_SMALL:"·",CHECK:"√",ITALIC_X:"✗",SUPER_N:"ⁿ",SQUARED:"²",CUBED:"³",SOLID_BOX:"■",PERMILE:"‰",REGISTERED_TM:"®",COPYRIGHT:"©",TRADEMARK:"™",BETA:"β",GAMMA:"γ",ZETA:"ζ",ETA:"η",IOTA:"ι",KAPPA:"κ",LAMBDA:"λ",NU:"ν",XI:"ξ",OMICRON:"ο",RHO:"ρ",UPSILON:"υ",CHI_LOWER:"φ",CHI_UPPER:"χ",PSI:"ψ",ALPHA:"α",ESZETT:"ß",PI:"π",SIGMA_UPPER:"Σ",SIGMA_LOWER:"σ",MU:"µ",TAU:"τ",THETA:"Θ",OMEGA:"Ω",DELTA:"δ",PHI_LOWER:"φ",EPSILON:"ε"},w={toArray:g,pad:d,truncate:v,multiply:y,format:m,style:b},E,S=e.define(t.isString,w).define(t.isArray,{style:b});for(E in w)w.hasOwnProperty(E)&&(S[E]=w[E]);return S.characters=p,S}"undefined"!=typeof n?"undefined"!=typeof t&&t.exports&&(t.exports=r(e("extended"),e("is-extended"),e("date-extended"))):"function"==typeof define?define(["require"],function(e){return r(e("extended"),e("is-extended"),e("date-extended"))}):this.stringExtended=r(this.extended,this.isExtended,this.dateExtended)}).call(this)}),e.define("/node_modules/promise-extended/package.json",function(e,t,n,r,i,s,o){t.exports={main:"index.js"}}),e.define("/node_modules/promise-extended/index.js",function(e,t,n,r,i,s,o){(function(){"use strict";function i(e,t){return t=t||0,r.call(e,t)}function o(e,t,n,r,o){function d(e,t){return function(){try{T(e.apply(null,arguments)).addCallback(t).addErrback(t)}catch(r){t.errback(r)}}}function E(e,t,n){var r=(new b).callback();return u(e,function(e){r=r.then(n?e:p(null,e)),n||(r=r.then(function(e){return t.push(e),t}))}),r}function S(e){return!a(e)&&l(e.then)}function x(e){var t=new b;return e.then(h(t,"callback"),h(t,"errback")),t.promise()}function T(e){var t;return e=i(arguments),e.length?e.length==1?(e=e.pop(),S(e)?e.addCallback&&e.addErrback?t=e:(console.log(e),t=x(e)):f(e)&&n.every(e,S)?t=(new w(e,!0)).promise():t=(new b).callback(e)):t=(new w(n.map(e,function(e){return T(e)}),!0)).promise():t=(new b).callback(e).promise(),t}function N(e,t){return function(){var r=new b,s=i(arguments);return s.push(r.resolve.bind(r)),e.apply(t||this,s),r.promise()}}function C(e){if(f(e))return E(e,[],!1);throw new Error("When calling promise.serial the first argument must be an array")}function k(e){if(f(e))return E(e,[],!0);throw new Error("When calling promise.serial the first argument must be an array")}function L(e,t){e=i(arguments);var n=!1;t=e.pop();var r=T(e);return function(){return n?T(t.apply(this,arguments)):(e=arguments,r.then(function(){return n=!0,t.apply(this,e)}.bind(this)))}}function A(){return new b}function O(e){return(new w(e,!0)).promise()}function M(e){return A().errback(e)}function _(e){return A().callback(e)}var u=n.forEach,a=r.isUndefinedOrNull,f=r.isArray,l=r.isFunction,c=r.isBoolean,h=o.bind,p=o.bindIgnore,v;if(typeof s!="undefined")v=s.nextTick;else if(typeof setImmediate=="function")v=setImmediate;else if(typeof MessageChannel!="undefined"){var m=new MessageChannel,g={},y=g;m.port1.onmessage=function(){g=g.next;var e=g.task;delete g.task,e()},v=function(e){y=y.next={task:e},m.port2.postMessage(0)}}else v=function(e){setTimeout(e,0)};var b=e({instance:{__fired:!1,__results:null,__error:null,__errorCbs:null,__cbs:null,constructor:function(){this.__errorCbs=[],this.__cbs=[],o.bindAll(this,["callback","errback","resolve","classic","__resolve","addCallback","addErrback"])},__resolve:function(){if(!this.__fired){this.__fired=!0;var e=this.__error?this.__errorCbs:this.__cbs,t=e.length,n,r=this.__error||this.__results;for(n=0;n<t;n++)this.__callNextTick(e[n],r)}},__callNextTick:function(e,t){v(function(){e.apply(this,t)})},addCallback:function(e){return e&&(S(e)&&e.callback&&(e=e.callback),this.__fired&&this.__results?this.__callNextTick(e,this.__results):this.__cbs.push(e)),this},addErrback:function(e){return e&&(S(e)&&e.errback&&(e=e.errback),this.__fired&&this.__error?this.__callNextTick(e,this.__error):this.__errorCbs.push(e)),this},callback:function(e){return this.__fired||(this.__results=arguments,this.__resolve()),this.promise()},errback:function(e){return this.__fired||(this.__error=arguments,this.__resolve()),this.promise()},resolve:function(e,t){return e?this.errback(e):this.callback.apply(this,i(arguments,1)),this},classic:function(e){return"function"==typeof e&&(this.addErrback(function(t){e(t)}),this.addCallback(function(){e.apply(this,[null].concat(i(arguments)))})),this},then:function(e,t){var n=new b,r=n;return l(t)&&(r=d(t,n)),this.addErrback(r),l(e)?this.addCallback(d(e,n)):this.addCallback(n),n.promise()},both:function(e){return this.then(e,e)},promise:function(){var e={then:h(this,"then"),both:h(this,"both"),promise:function(){return e}};return u(["addCallback","addErrback","classic"],function(t){e[t]=h(this,function(){return this[t].apply(this,arguments),e})},this),e}}}),w=b.extend({instance:{__results:null,__errors:null,__promiseLength:0,__defLength:0,__firedLength:0,normalizeResults:!1,constructor:function(e,t){this.__errors=[],this.__results=[],this.normalizeResults=c(t)?t:!1,this._super(arguments),e&&e.length?(this.__defLength=e.length,u(e,this.__addPromise,this)):this.__resolve()},__addPromise:function(e,t){e.then(h(this,function(){var e=i(arguments);e.unshift(t),this.callback.apply(this,e)}),h(this,function(){var e=i(arguments);e.unshift(t),this.errback.apply(this,e)}))},__resolve:function(){if(!this.__fired){this.__fired=!0;var e=this.__errors.length?this.__errorCbs:this.__cbs,t=e.length,n,r=this.__errors.length?this.__errors:this.__results;for(n=0;n<t;n++)this.__callNextTick(e[n],r)}},__callNextTick:function(e,t){v(function(){e.apply(null,[t])})},addCallback:function(e){return e&&(S(e)&&e.callback&&(e=h(e,"callback")),this.__fired&&!this.__errors.length?this.__callNextTick(e,this.__results):this.__cbs.push(e)),this},addErrback:function(e){return e&&(S(e)&&e.errback&&(e=h(e,"errback")),this.__fired&&this.__errors.length?this.__callNextTick(e,this.__errors):this.__errorCbs.push(e)),this},callback:function(e){if(this.__fired)throw new Error("Already fired!");var t=i(arguments);return this.normalizeResults&&(t=t.slice(1),t=t.length==1?t.pop():t),this.__results[e]=t,this.__firedLength++,this.__firedLength==this.__defLength&&this.__resolve(),this.promise()},errback:function(e){if(this.__fired)throw new Error("Already fired!");var t=i(arguments);return this.normalizeResults&&(t=t.slice(1),t=t.length==1?t.pop():t),this.__errors[e]=t,this.__firedLength++,this.__firedLength==this.__defLength&&this.__resolve(),this.promise()}}});return t.define({isPromiseLike:S}).expose({isPromiseLike:S,when:T,wrap:N,wait:L,serial:C,chain:k,Promise:b,PromiseList:w,promise:A,defer:A,deferredList:O,reject:M,resolve:_})}var r=Array.prototype.slice;"undefined"!=typeof n?"undefined"!=typeof t&&t.exports&&(t.exports=o(e("declare.js"),e("extended"),e("array-extended"),e("is-extended"),e("function-extended"))):"function"==typeof define?define(["require"],function(e){return o(e("declare.js"),e("extended"),e("array-extended"),e("is-extended"),e("function-extended"))}):this.arrayExtended=o(this.declare,this.extended,this.arrayExtended,this.isExtended,this.functionExtended)}).call(this)}),e.define("/node_modules/function-extended/package.json",function(e,t,n,r,i,s,o){t.exports={main:"index.js"}}),e.define("/node_modules/function-extended/index.js",function(e,t,n,r,i,s,o){(function(){"use strict";function r(e,t){function u(e,t){return t=t||0,o.call(e,t)}function a(e,t,n){n=u(arguments,2);if(!i(t)||t in e){if(!i(t)&&!s(t))throw new Error(t+" is not a function");return i(t)?function(){var r=e[t];if(s(r)){var i=n.concat(u(arguments));return r.apply(e,i)}return r}:n.length?function(){var r=n.concat(u(arguments));return t.apply(e,r)}:function(){return t.apply(e,arguments)}}throw new Error(t+" property not defined in scope")}function f(e,t){t=u(arguments,1);if(!i(e)&&!s(e))throw new Error(e+" must be the name of a property or function to execute");return i(e)?function(){var n=u(arguments),r=n.shift(),i=r[e];return s(i)?(n=t.concat(n),i.apply(r,n)):i}:function(){var n=u(arguments),r=n.shift();return n=t.concat(n),e.apply(r,n)}}function l(e,t,n){n=u(arguments,2);if(!i(t)||t in e){if(!i(t)&&!s(t))throw new Error(t+" is not a function");return i(t)?function(){var r=e[t];return s(r)?r.apply(e,n):r}:function(){return t.apply(e,n)}}throw new Error(t+" property not defined in scope")}function c(e){var t=u(arguments,1);if(!r(e))throw new TypeError("scope must be an object");t.length===1&&n(t[0])&&(t=t[0]);if(!t.length){t=[];for(var i in e)e.hasOwnProperty(i)&&s(e[i])&&t.push(i)}for(var o=0,f=t.length;o<f;o++)e[t[o]]=a(e,e[t[o]]);return e}function h(e,t){t=u(arguments,1);if(!i(e)&&!s(e))throw new Error(e+" must be the name of a property or function to execute");return i(e)?function(){var n=this[e];if(s(n)){var r=t.concat(u(arguments));return n.apply(this,r)}return n}:function(){var n=t.concat(u(arguments));return e.apply(this,n)}}function p(e,t){return function(){var n=u(arguments);return t?e.apply(this,arguments):function(){return e.apply(this,n.concat(u(arguments)))}}}function d(e,t,n){var r;n?r=a(n,t):r=t;if(e){var i=e-1;for(var s=i;s>=0;s--)r=p(r,s===i)}return r}var n=t.isArray,r=t.isObject,i=t.isString,s=t.isFunction,o=Array.prototype.slice;return e.define(r,{bind:a,bindAll:c,bindIgnore:l,curry:function(e,t,n){return d(t,n,e)}}).define(s,{bind:function(e,t){return a.apply(this,[t,e].concat(u(arguments,2)))},bindIgnore:function(e,t){return l.apply(this,[t,e].concat(u(arguments,2)))},partial:h,applyFirst:f,curry:function(e,t,n){return d(t,e,n)},noWrap:{f:function(){return this.value()}}}).define(i,{bind:function(e,t){return a(t,e)},bindIgnore:function(e,t){return l(t,e)},partial:h,applyFirst:f,curry:function(e,t,n){return d(t,e,n)}}).expose({bind:a,bindAll:c,bindIgnore:l,partial:h,applyFirst:f,curry:d})}"undefined"!=typeof n?"undefined"!=typeof t&&t.exports&&(t.exports=r(e("extended"),e("is-extended"))):"function"==typeof define?define(["require"],function(e){return r(e("extended"),e("is-extended"))}):this.functionExtended=r(this.extended,this.isExtended)}).call(this)}),e.define("/lib/formatters/index.js",function(e,t,n,r,i,s,o){"use strict";e("./dot"),e("./spec");var u=e("./reporter");n.getReporter=function(t){return u.getInstance(t)}}),e.define("/lib/formatters/dot.js",function(e,t,n,r,i,s,o){"use strict";var u=e("../extended"),a=e("./reporter"),f=u.characters,l=u.style,c=u.format,h=u.multiply,p=s.stdout,d=function(e,t){return e!==1?t+"s":t};a.extend({instance:{printTitle:function(t){!t.sub&&t.description&&console.log("\n"+h("	",t.level)+t.description+" ")},printActionSuccess:function(){p.write(l(".",["green"]))},printActionPending:function(){p.write(l(".",["cyan"]))},printActionError:function(){p.write(l(f.ITALIC_X,["red"]))},printError:function(t){p.write(t.stack||t)},printSummary:function(t){if(!t.sub){var n=t.summary,r=this.processSummary(n),i=r.errCount,s=r.successCount,o=r.pendingCount,u=r.duration;p.write(c(" %s %s ",f.DOUBLE_RIGHT,this.formatMs(u))),console.log(c("Finished in %s",this.formatMs(u)));var a=[s+d(s," example"),i+d(i," error"),o+" pending"],h=o>0?"cyan":i>0?"red":"green";return p.write(c("%s\n",l(a.join(", "),h))),i?1:0}}}}).as(t).registerType("dot").registerType("dotmatrix")}),e.define("/lib/formatters/reporter.js",function(e,t,n,r,i,s,o){"use strict";var u=e("../extended"),a=u.format;u.declare({instance:{listenTest:function(t){t.on("addTest",u.bind(this,"listenTest")),t.on("addAction",u.bind(this,"listenAction")),t.on("run",u.bind(this,"printTitle")),t.on("error",u.bind(this,"printError")),t.on("done",u.bind(this,"printSummary",t))},listenAction:function(t){t.on("error",u.bind(this,"printActionError",t)),t.on("success",u.bind(this,"printActionSuccess",t)),t.on("pending",u.bind(this,"printActionPending",t))},formatMs:function(t){return a("% 6ds",t/1e3)},printTitle:function(){},printActionSuccess:function(){},printActionPending:function(){},printActionError:function(){},printError:function(){},processSummary:function(t){t.hasOwnProperty("summaries")&&(t=t.summaries);var n=0,r=0,i=0,s={},o=0;return u(t).forEach(function(e){o+=e.duration}),function a(e){u(e).forEach(function(e,t){e.hasOwnProperty("summaries")?a(e.summaries):e.status==="passed"?r++:e.status==="pending"?i++:(s[t]=e.error,n++)})}(t),{errCount:n,successCount:r,pendingCount:i,errors:s,duration:o}},printSummary:function(){}},"static":{reporters:{},registerType:function(e){return e=e.toLowerCase(),this.reporters.hasOwnProperty(e)||(this.reporters[e]=this),this},getInstance:function(e){e=e.toLowerCase();if(this.reporters.hasOwnProperty(e))return new this.reporters[e];throw new Error("Invalid Reporter type")}}}).as(t)}),e.define("/lib/formatters/spec.js",function(e,t,n,r,i,s,o){"use strict";var u=e("../extended"),a=e("./reporter"),f=u.characters,l=u.style,c=u.format,h=u.multiply,p=function(e,t){return e!==1?t+"s":t};a.extend({instance:{printLineForLevel:function(t){return t||console.log(),this},printTitle:function(t){if(t.description){var n=t.level,r=t.description;this.printLineForLevel(n),console.log(h("	",n)+r),this.printLineForLevel(n)}},printActionSuccess:function(e){var t=e.level,n=e.get("summary");console.log(l(h("	",t)+f.CHECK+" %s (%dms)",["green"]),e.description,n.duration)},printActionPending:function(e){var t=e.get("summary"),n=e.level;console.log(l(h("	",n)+f.LAMBDA+" %s (%dms)",["cyan"]),e.description,t.duration)},printActionError:function(t){var n=t.level,r=t.get("summary"),i=r.error;console.log(l(h("	",n)+f.ITALIC_X+" %s, (%dms)",["red","bold"]),t.description,r.duration),i&&(i instanceof Error?console.log(l(i.stack?i.stack.toString():i,["red","bold"])):console.log(l(i.toString(),["red","bold"])))},printError:function(t){t&&(t instanceof Error?console.log(l(t.stack?t.stack.toString():t,["red","bold"])):console.log(l(t.toString(),["red","bold"])))},printSummary:function(t){if(!t.sub){var n=t.get("summary"),r=this.processSummary(n),i=r.errCount,s=r.successCount,o=r.pendingCount,u=r.duration;console.log(c("Finished in %s",this.formatMs(u)));var a=[s+p(s," example"),i+p(i," error"),o+" pending"],f=o>0?"cyan":i>0?"red":"green";return console.log(l(a.join(", "),f)),i?1:0}}}}).as(t).registerType("spec")}),e.define("/lib/interfaces/index.js",function(e,t,n,r,i,s,o){"use strict";var u=e("./common").Test,a=e("./bdd"),f=e("./tdd");t.exports={bdd:a,tdd:f,reporter:function(t){a.reporter(t),f.reporter(t)},printSummary:function(){return u.printSummary()},run:function(t){return u.run(t)}}}),e.define("/lib/interfaces/common/index.js",function(e,t,n,r,i,s,o){n.Action=e("./action"),n.Test=e("./test.js")}),e.define("/lib/interfaces/common/action.js",function(e,t,n,r,i,s,o){"use strict";var u=e("../../extended"),a=u.isFunction,f=e("./emitter"),l=u.merge,c=u.Promise,h=e("../../utils"),p=h.setUpCb;f.extend({instance:{level:0,constructor:function(e,t,n,r){this._super(arguments),this.level=n,this.description=e,this.parent=t,this.fn=r,this.__summary={description:e,start:null,end:null,duration:0,status:"pending",error:!1};var i=this.stub=!a(r);this.action=i?u.resolve(this.__summary):p(r)},success:function(e,t){return l(this.get("summary"),{start:e,end:t,duration:t-e,status:"passed"}),this.emit("success",this.summary),this.get("summary")},failed:function(e,t,n){return l(this.get("summary"),{start:e,end:t,duration:t-e,status:"failed",error:n||new Error}),this.emit("error",n),this.get("summary")},run:function(){var e=new c,t=new Date;return this.stub?(e=this.action,this.emit("pending",this.get("summary"))):e=this.action(this.parent).then(u.bind(this,function(){return this.success(t,new Date)}),u.bind(this,function(e){return this.failed(t,new Date,e)})),e},getters:{summary:function(){return this.__summary}}}}).as(t)}),e.define("/lib/interfaces/common/emitter.js",function(e,t,n,r,i,s,o){"use strict";var u=e("../../extended"),a=e("events").EventEmitter,f=u.merge({},a.prototype,{constructor:function(){return a.call(this),this._super(arguments)}});u.declare({instance:f}).as(t)}),e.define("events",function(e,t,n,r,i,s,o){function f(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}s.EventEmitter||(s.EventEmitter=function(){});var u=n.EventEmitter=s.EventEmitter,a=typeof Array.isArray=="function"?Array.isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},l=10;u.prototype.setMaxListeners=function(e){this._events||(this._events={}),this._events.maxListeners=e},u.prototype.emit=function(e){if(e==="error")if(!this._events||!this._events.error||a(this._events.error)&&!this._events.error.length)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if(typeof t=="function"){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);t.apply(this,n)}return!0}if(a(t)){var n=Array.prototype.slice.call(arguments,1),r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i].apply(this,n);return!0}return!1},u.prototype.addListener=function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");this._events||(this._events={}),this.emit("newListener",e,t);if(!this._events[e])this._events[e]=t;else if(a(this._events[e])){if(!this._events[e].warned){var n;this._events.maxListeners!==undefined?n=this._events.maxListeners:n=l,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}this._events[e].push(t)}else this._events[e]=[this._events[e],t];return this},u.prototype.on=u.prototype.addListener,u.prototype.once=function(e,t){var n=this;return n.on(e,function r(){n.removeListener(e,r),t.apply(this,arguments)}),this},u.prototype.removeListener=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var n=this._events[e];if(a(n)){var r=f(n,t);if(r<0)return this;n.splice(r,1),n.length==0&&delete this._events[e]}else this._events[e]===t&&delete this._events[e];return this},u.prototype.removeAllListeners=function(e){return e&&this._events&&this._events[e]&&(this._events[e]=null),this},u.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),a(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}}),e.define("/lib/utils.js",function(e,t,n,r,i,s,o){"use strict";function h(e){var t=[];return l(e)&&(t=u(e).toArray("|").map(function(e){return u(e.trim()).toArray(":").map(function(e){return e.trim()}).value()}).value()),t}function p(e){return function(t){var n=new c,r=new c,i=!1,o=t.ignoreProcessError===!0,l=function(e){i||(i=!0,n.errback(e))};o===!1&&s.on("uncaughtException",l);try{var h=function(e){i||(e?n.errback(e):n.callback(),i=!0)},p=e.length,d=u.bind(r,e)(h,r);if(a(d))d.then(r);else if(f(d)||p===0)i||(n.callback(),i=!0);r.then(function(){i||(n.callback(),i=!0)},function(e){i||(n.errback(e),i=!0)})}catch(v){i||(n.errback(v),i=!0)}return n.both(function(){o===!1&&s.removeListener("uncaughtException",l)}),n}}var u=e("./extended"),a=u.isPromiseLike,f=u.isDefined,l=u.isString,c=u.Promise;n.splitFilter=h,n.setUpCb=p}),e.define("/lib/interfaces/common/test.js",function(e,t,n,r,i,s,o){"use strict";var u=e("../../utils"),a=u.splitFilter,f=u.setUpCb,l=e("../../extended"),c=e("./emitter"),h=l.isEmpty,p=l.isString,d=l.merge,v=l.Promise,m=e("./action"),g=e("../../formatters");c.extend({instance:{sub:!1,parent:null,level:0,stopOnError:!1,ignoreProcessError:!1,constructor:function y(e,t){this._super(arguments),this.Action=this._static.Action,this.description=e,this.__shoulds=[],this.__ba=[],this.__be=[],this.__aa=[],this.__ae=[],d(this,t),!this.sub&&!this.filtered&&(this._static.tests[e]=this)},getAction:function(t){var n=l.filter(this.__shoulds,function(e){return e instanceof this.Action?e.description===t:!1},this);return n.length!==0?n[0]:null},as:function(e){return e.exports=this,this},beforeAll:function(e){return this.__ba.push(l.partial(f(e),this)),this},beforeEach:function(e){return this.__be.push(l.partial(f(e),this)),this},afterAll:function(e){return this.__aa.push(l.partial(f(e),this)),this},afterEach:function(e){return this.__ae.push(l.partial(f(e),this)),this},context:function(e){var t=this._static.clone(this,null,{sub:!0});return this.emit("addTest",t),e&&e(t),this.__shoulds.push(t),t},_addTest:function(e,t){var n=this._static.clone(this,e,{sub:!0,level:this.level+1,parent:this},t);return this.emit("addTest",n),t&&t(n),this.__shoulds.push(n),n},_addAction:function(e,t){var n=new this.Action(e,this,this.level+1,t);return this.emit("addAction",n),this.__shoulds.push(n),this},__runAction:function(e){var t=this.stopOnError;return l.serial(this.__be).then(l.bind(this,function(){var n=new v;return e.run(this).then(l.bind(this,function(){var i=e.get("summary");i.status==="pending"?n.callback():i.status==="passed"?n.callback():n[t?"errback":"callback"]()}),l.bind(this,function(t){this.emit("error",t)})),n})).then(l.bind(this,function(){return l.serial(this.__ae)}))},run:function(e){var t;return e?t=this.filter(e).run():(t=this.__runPromise,t||(this.emit("run",this),t=this.__runPromise=l.serial(this.__ba).then(l.bind(this,function(){return l.serial(l.map(this.__shoulds,function(e){return l.bind(this,function(){var t;return e instanceof m?t=this.__runAction(e):t=e.run(),t})},this))})).then(l.bind(this,function(){return l.serial(this.__aa)}),l.bind(this,"emit","error")).both(l.bind(this,"emit","done")))),t},matches:function(t){return this.description===t},filter:function(t){var n=this,r,i;return t.length&&(t=p(t)?a(t):[t],t&&(n=this._static.clone(this,this.description,{sub:this.sub,filtered:this.sub?!1:!0,__ba:this.__ba.slice(0),__aa:this.__ba.slice(0),__shoulds:l(this.__shoulds).map(function(e){var n,s=!1,o=null;for(r=0,i=t.length;r<i&&!s;r++)e.description===t[r][0]&&(s=!0,n=t[r].slice(1));return s&&(e instanceof this.Action?o=e:o=e.filter(n)),o},this).compact().value()}))),n},getters:{summary:function(){var e=0,t={description:this.description,summaries:{}},n=t.summaries;return l.map(this.__shoulds,function(t){var r=t.get("summary");t instanceof m||t.description?(n[t.description]=r,e+=r.duration):(d(n,r.summaries),e+=r.duration)}),t.duration=e,t}}},"static":{tests:{},init:function(){this.reporter=g.getReporter("spec"),this.Action=m},clone:function(e,t,n,r){return new this(t,d({level:e.level,__be:e.__be.slice(),__ae:e.__ae.slice(),reporter:e.reporter,stopOnError:e.stopOnError,ignoreProcessError:e.ignoreProcessError},n),r)},__filter:function(e){var t={},n=this.tests,r=l.pluck(e,"0");return l.forEach(r,function(r,i){var s=n[r];if(s){var o=n[r].filter(e[i].slice(1));t[r]?t[r].__shoulds=t[r].__shoulds.concat(o.__shoulds):t[r]=o}}),t},run:function(t){var n={},r=this.tests;return t=a(t),t.length&&(r=this.__filter(t)),h(r)?(console.warn("No Tests found"),l.resolve()):l.serial(l(r).keys().map(function(e){return function(){return r[e].run().both(function(t){n[e]=t})}}).value()).then(l.bind(this,function(){return!t||!t.length?this.printSummary(n):0}))},printSummary:function(){var t=this.reporter,n=this.tests;if(!h(n)){t.printTitle({description:"Summary"});var r={},i=l.hash.keys(n),s=0;return l(n).forEach(function(e,t){var n=e.get("summary");n&&(r[t]=n,s+=1)}),s<i.length&&t.printError(new Error("Async Error")),t.printSummary({summary:r})}}}}).as(t)}),e.define("/lib/interfaces/bdd/index.js",function(e,t,n,r,i,s,o){"use strict";var u=e("./test"),a={Action:u.Action,Test:u,reporter:function(t){u.reporter=t},describe:function(t,n){var r=new u(t,{});return u.reporter.listenTest(r),n(r),r}};t.exports=a}),e.define("/lib/interfaces/bdd/test.js",function(e,t,n,r,i,s,o){"use strict";var u=e("../common").Test;u.extend({instance:{describe:function(e,t){return this._addTest(e,t)},should:function(e,t){return this._addAction("should "+e,t)}}}).as(t)}),e.define("/lib/interfaces/tdd/index.js",function(e,t,n,r,i,s,o){"use strict";var u=e("./test"),a={Action:u.Action,Test:u,reporter:function(t){u.reporter=t},suite:function(t,n){var r=new u(t,{});return u.reporter.listenTest(r),n(r),r}};t.exports=a}),e.define("/lib/interfaces/tdd/test.js",function(e,t,n,r,i,s,o){"use strict";var u=e("../common").Test;u.extend({instance:{suite:function(e,t){return this._addTest(e,t)},test:function(e,t){return this._addAction(e,t)}}}).as(t)}),e.define("/browser/it.js",function(e,t,n,r,i,s,o){(function(){"use strict";function t(){var t=e("../lib/extended"),n=t.merge,r=e("../lib/formatters"),i=e("../lib/interfaces"),s={reporter:function(t){i.reporter(r.getReporter(t))},printSummary:function(){i.printSummary()},run:function(t){return i.run(t)}};return t(i).forEach(function(e){s=n({},e,s)}),s}"function"==typeof this.define&&this.define.amd?define([],function(){return t()}):this.it=t()}).call(window)}),e("/browser/it.js")})();